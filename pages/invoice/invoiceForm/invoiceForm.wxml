<view class="container">
    <view class="custom-nav c-height">
        <van-nav-bar
                fixed="{{true}}"
                title="开具发票"
                left-arrow
                class="cutom-nav"
                bind:click-left="goBack"
        />
    </view>


    <view class="title" style="margin-top:{{cusNavHeight}}px">发票信息</view>


    <van-cell-group>
        <van-cell title-width="6.2em" required title-class="title-cell1"
                  value-class="value-cell1">
            <view slot="title" style="font-size:28rpx">
                抬头类型
            </view>
            <van-radio-group
                    value="{{ invoiceInfo.invoiceType }}"
                    bind:change="onChangeType"
                    direction="horizontal"
            >
                <view style="display:flex;align-items:center">
                    <van-radio name="1" icon-size="18px" checked-color="#f7800c" label-class="invoice-radio-label1"
                               icon-class="invoice-radio1">企业单位
                    </van-radio>
                    <van-radio name="2" icon-size="18px" checked-color="#f7800c" label-class="invoice-radio-label1"
                               icon-class="invoice-radio1">个人/非企业单位
                    </van-radio>
                </view>
            </van-radio-group>
        </van-cell>


        <van-field
                label-class="label-class1"
                input-class="input-class1"
                data-field="companyName"
                bind:change="onChangeInput"
                value="{{invoiceInfo.companyName}}"
                required
                clearable
                right-icon="wap-nav"
                bind:click-icon="showPopup"
                label="公司名称"
                placeholder="请输入公司名称"
        />
        <van-field
                label-class="label-class1"
                input-class="input-class1"
                data-field="taxNo"
                bind:change="onChangeInput"
                value="{{invoiceInfo.taxNo}}"
                required
                clearable
                label="公司税号"
                wx:if="{{ invoiceInfo.invoiceType ==='1'}}"
                placeholder="请输入公司税号"
        />
        <van-field
                label-class="label-class1"
                input-class="input-class1"
                data-field="address"
                bind:change="onChangeInput"
                value="{{invoiceInfo.address}}"
                clearable
                label="公司地址"
                placeholder="请输入公司地址"
        />
        <van-field
                label-class="label-class1"
                input-class="input-class1"
                data-field="mobile"
                bind:change="onChangeInput"
                value="{{invoiceInfo.mobile}}"
                clearable
                label="公司电话"
                placeholder="请输入公司电话"
        />
        <van-field
                label-class="label-class1"
                input-class="input-class1"
                data-field="bankName"
                bind:change="onChangeInput"
                value="{{invoiceInfo.bankName}}"
                clearable
                label="公司开户行"
                placeholder="请输入公司开户行"
        />
        <van-field
                label-class="label-class1"
                input-class="input-class1"
                data-field="bankNo"
                bind:change="onChangeInput"
                value="{{invoiceInfo.bankNo}}"
                clearable
                label="开户账号"
                placeholder="请输入开户账号"
        />
        <van-field
                label-class="label-class1"
                input-class="input-class1"
                data-field="remark"
                bind:change="onChangeInput"
                value="{{invoiceInfo.remark}}"
                clearable
                label="备注"
                type="textarea"
                placeholder="请输入备注"
        />
    </van-cell-group>

    <view class="title">发票详情</view>
    <view class="grand-total">wx
        <view class="l1">总金额</view>
        <view class="l1">
            <text class="orange">2</text><text>元</text>
        </view>
        <view class="l1" catch:tap="goDetail">共 <text class="orange">3</text> 张，查看详情<text
                style="margin-left:10rpx;font-size:26rpx;color:#999999;" class="arrow szs szs-arrow-right"></text>
        </view>
    </view>
    <view class="title">接收方式</view>
    <van-cell-group>
        <van-field
                label-class="label-class1"
                input-class="input-class1"
                data-field="email"
                bind:change="onChangeInput"
                value="{{invoiceInfo.email}}"
                required
                clearable
                label="电子邮箱"
                placeholder="请输入电子邮箱"
        />
    </van-cell-group>


    <view class="btn-wrapper">
        <view class="btn btn1 {{okSubmit?'ok':''}}" catch:tap="submitInvoiceForm">提交</view>
    </view>
    <van-popup show="{{ showInvoicePopup }}" z-index="{{200}}"
               root-portal="{{false}}"
               bind:close="closePopup" round="{{false}}" position="bottom"
               duration="{{100}}"
               close-on-click-overlay
               safe-area-tab-bar="{{false}}">
        <text class="close icon szs szs-close-bold" catch:tap="closePopup"></text>
        <view class="divider"></view>
        <view class="pop-wrapper">
            <block wx:if="{{companyList.length===0}}">
                <view style="height: 600rpx">
                    <view class="empty">
                        暂未添加发票抬头
                    </view>
                </view>

            </block>
            <block wx:else>
                <scroll-view class="scroll-list" scroll-y="true" style="height: 600rpx" show-scrollbar="{{false}}"
                             enhanced="{{true}}">
                    <view class="item" catch:tap="checkInvoiceItem" data-item="{{item}}" wx:for="{{companyList}}"
                          wx:key="{{item.companyName}}">
                        <view class="name {{selectedItem.companyName===item.companyName?'selected':''}}">
                            {{item.companyName}}
                        </view>
                        <text class="check icon  szs szs-checkboxchecked {{selectedItem.companyName===item.companyName?'selected':''}}"></text>
                    </view>
                </scroll-view>
            </block>
        </view>

        <view class="btn-wrapper">
            <view class="btn btn2" catch:tap="add">添加常用发票抬头</view>
        </view>
    </van-popup>
    <van-toast id="van-toast" class="page-toast" style="--toast-max-width: 85%;"/>
</view>
